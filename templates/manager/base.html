{% extends 'core/base.html' %}

{% block main %}
<div class="row g-5">
    <div class="col-sm-12 col-md-4 col-lg-3" id="sidebar_container">
        <div class="sticky-top z-1 py-3" style="top: 70px;">
            <div class="d-grid bg-body-tertiary border rounded">
                <button class="btn fs-5" type="button" data-toggle="collapse" data-target="#sidebar" aria-expanded="true" aria-controls="sidebar" onclick="toggle_sidebar()"><i class="bi bi-list"></i></button>
                <div id="sidebar">
                    <div class="card bg-body-tertiary border-0 border-top rounded-0 rounded-bottom">
                        <div class="card-body">
                            {% include 'manager/base_sidebar.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="container-fluid px-0 py-3">
            {% if not unit.is_active %}
                <div class="alert alert-warning text-center text-uppercase" role="alert" style="font-size: 0.75rem;">This unit is inactive.</div>
            {% endif %}
            <div class="d-flex gap-5">
                {% if page_title_url %}
                    <a class="text-body text-decoration-none" href="{{ page_title_url }}"><h1>{% if page_title %}{{ page_title }}{% endif %}</h1></a>
                {% else %}
                    <h1>{% if page_title %}{{ page_title }}{% endif %}</h1>
                {% endif %}
                
                {% if page_title_actions %}{% block page_title_actions %}
                    <div class="ms-auto d-flex gap-2 align-items-center">
                    {% for page_action in page_title_actions %}
                        {% if page_action.url %}
                            {% if object %}
                                {% url page_action.url unit.id object.id as url %}
                            {% else %}
                                {% url page_action.url unit.id as url %}
                            {% endif %}
                            <a class="btn btn-primary  {{ page_action.classes }} {% if request.path ==  url %}disabled{% endif %}" {% if request.path ==  url %}aria-disabled="true"{% endif %} href="{{ url }}" {% if request.path == url %}aria-current="page"{% endif %}>{{ page_action.label }}</a>
                        {% endif %}
                    {% endfor %}
                    </div>
                {% endblock %}{% endif %}
            </div>
            <hr class="my-4">
            {% if page_warnings %}{% block page_warnings %}
                {% for warning in page_warnings %}
                    <div class="alert alert-{{ warning.type }}">{{ warning.content }}</div>
                {% endfor %}
            {% endblock %}{% endif %}
            {% if page_info %}{% block page_info %}
                <table class="table table-borderless">
                    <tbody>
                        {% for info in page_info %}
                            {% if info.wide %}
                            <tr><th class="fw-semibold" colspan="2">{{ info.label }}</th></tr>
                            <tr><td colspan="2">{{ info.content }}</td></tr>
                            {% else %}
                            <tr><th class="fw-semibold">{{ info.label }}</th><td>{{ info.content }}</td></tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            {% endblock %}{% endif %}
            {% if page_actions %}{% block page_actions %}
                <div class="my-3 mx-2 d-flex gap-2 flex-wrap">
                {% for page_action in page_actions %}
                    {% if page_action.url %}
                        {% if object %}
                            {% url page_action.url unit.id object.id as url %}
                        {% else %}
                            {% url page_action.url unit.id as url %}
                        {% endif %}
                        <a class="btn btn-primary  {{ page_action.classes }} {% if page_action.disabled %}disabled{% endif %}" {% if page_action.disabled %}aria-disabled="true"{% endif %} href="{{ url }}">{{ page_action.label }}</a>
                    {% endif %}
                {% endfor %}
                </div>
            {% endblock %}{% endif %}
            {% block extra_header %}{% endblock %}
            {% if page_info or page_warnings or page_actions %}
                <hr class="my-4">
            {% endif %}

            {% if form %}
                {% block form %}
                    {% include 'manager/base_form.html' %}
                {% endblock %}
            {% endif %}
            {% if table %}
                {% block table %}
                    {% include 'manager/base_table.html' %}
                {% endblock %}
            {% endif %}
            {% if tables %}
                {% block tables %}
                    {% include 'manager/base_tables.html' %}
                {% endblock %}
            {% endif %}

            {% block content %}
            {% endblock %}
        </div>
    </div>
</div>
{% endblock %}
