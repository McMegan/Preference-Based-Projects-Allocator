{% extends 'manager/base.html' %}

{% block page_title %}Start Project Allocation{% endblock %}
{% block extra_header %}
    <div class="my-3 mx-3 d-flex gap-5 row-gap-3 flex-wrap">
        <div class="d-flex gap-3">
            <div class="fw-semibold">Total No. Students</div>
            <div>{{ unit.students_count }}</div>
        </div>
        <div class="d-flex gap-3">
            <div class="fw-semibold">Total No. Students who Submitted Preferences</div>
            <div>{{ submitted_prefs_students_count }}</div>
        </div>
    </div>
    <hr class="my-4">
{% endblock %}
{% block content %}
    {% if unit.preference_submission_set and unit.preference_submission_ended %}
        <div>
            {% block form %}
                {% load crispy_forms_tags %} 
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %} {% crispy form %}
                </form>
            {% endblock %}
        </div>
    {% else %}
        {% if not unit.preference_submission_set %}
            <div class="alert alert-danger" role="alert">
                A preference submission timeframe for this unit has not been set.
            </div>
        {% endif %}
        {% if not unit.preference_submission_ended %}
            <div class="alert alert-danger" role="alert">
                Allocation can only start once the preference submission timeframe for this unit has ended.
            </div>
        {% endif %}
    {% endif %}
{% endblock content %}